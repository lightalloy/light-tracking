# Light Tracking

Кроссплатформенное десктопное приложение для трекинга времени, построенное на Wails v2 с React frontend и Go backend.

## Возможности

- **Трекинг времени**: Запуск и остановка таймера для отслеживания времени работы над задачами
- **Автоматическое переключение**: При запуске новой задачи предыдущая автоматически завершается
- **Статистика**: Просмотр статистики по дням с агрегированным временем по задачам
- **Редактирование записей**: Возможность редактирования и удаления временных слотов
- **Системный трей**: Иконка в системном трее с индикацией статуса таймера
- **Уведомления**: Уведомления о длительных сессиях (каждые 2 часа)

## Требования

- Go 1.24 или выше
- Node.js 20.12.0+ и pnpm (для frontend, требуется для Vite 7+)
- Wails v2 CLI

### Системные зависимости

#### Linux (Ubuntu/Debian/Xubuntu)

Для работы системного трея необходимо установить:

sudo apt install libayatana-appindicator3-dev#### macOS

На macOS дополнительные зависимости не требуются.

#### Windows

На Windows дополнительные зависимости не требуются.

## Установка зависимостей

### Go зависимости
```bash
go mod download
```

### Frontend зависимости
```bash
cd frontend
pnpm install
```

## Разработка

### Запуск в режиме разработки
```bash
wails dev
```

### Генерация Wails bindings
После изменения методов в `internal/app/app.go`:
```bash
wails generate module
```

### Сборка приложения
```bash
wails build
```

## Структура проекта

```
light-tracking/
├── frontend/              # React frontend
│   ├── src/
│   │   ├── components/    # React компоненты
│   │   ├── App.tsx
│   │   └── main.tsx
│   └── package.json
├── internal/               # Go backend
│   ├── app/
│   │   ├── app.go         # Основная логика приложения
│   │   ├── database.go    # Работа с SQLite
│   │   ├── timer.go       # Логика таймера
│   │   ├── systray.go     # Интеграция с системным треем
│   │   └── notifications.go # Уведомления
│   └── models/
│       └── timeslot.go    # Модели данных
├── main.go                # Точка входа
└── wails.json             # Конфигурация Wails
```

## База данных

Приложение использует SQLite для хранения данных. База данных создается автоматически в `~/.light-tracking/time_tracking.db`.

### Схема базы данных

Таблица `time_slots`:
- `id` - INTEGER PRIMARY KEY
- `task_name` - TEXT NOT NULL
- `start_time` - DATETIME NOT NULL
- `end_time` - DATETIME (NULL для активных слотов)
- `duration_seconds` - INTEGER

## Использование

1. **Запуск таймера**: Введите название задачи и нажмите "Start"
2. **Остановка таймера**: Нажмите "Stop" для завершения текущей сессии
3. **Переключение задач**: Введите новое название задачи и нажмите "Start" - предыдущая задача автоматически завершится
4. **Просмотр статистики**: Перейдите на вкладку "Statistics" для просмотра статистики по дням
5. **Редактирование**: Нажмите "Edit" на любом временном слоте для редактирования
6. **Удаление**: Нажмите "Delete" для удаления временного слота

## Системный трей

Приложение создает иконку в системном трее с:
- Индикацией статуса таймера (запущен/остановлен)
- Отображением текущей задачи и времени
- Контекстным меню для показа/скрытия окна и выхода

## Уведомления

Приложение отправляет уведомления о длительных сессиях каждые 2 часа, если таймер активен.

## Кроссплатформенность

Приложение поддерживает:
- Linux (включая Xubuntu)
- Windows
- macOS

## Лицензия

MIT
